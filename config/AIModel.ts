

const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

   export  const chatSession = model.startChat({
      generationConfig,
   // safetySettings: Adjust safety settings
   // See https://ai.google.dev/gemini-api/docs/safety-settings
   history: [
    {
      role: "user",
      parts: [
        {text: "Generate Travel Plan for Location : Berlin, Germany from Delhi, India for 2 days from 23 July 2024 to 25 July 2024, for Just Me with a Cheap budget with Actual Flight Details, Flight Price with booking url, Hotel options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, place details, Place Image Url, Geo Coordinates, Ticket Pricing, Time to travel each of the location for 2 days and 1 night with each day plan with best time to visit in JSON format."},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"trip\": {\n    \"destination\": \"Berlin, Germany\",\n    \"origin\": \"Delhi, India\",\n    \"duration\": \"2 days\",\n    \"date\": \"23 July 2024 - 25 July 2024\",\n    \"traveler\": \"Just Me\",\n    \"budget\": \"Cheap\",\n    \"flight\": {\n      \"departure\": {\n        \"date\": \"23 July 2024\",\n        \"time\": \"10:00 AM\",\n        \"airline\": \"Turkish Airlines\",\n        \"flight_number\": \"TK 721\",\n        \"from\": \"Delhi (DEL)\",\n        \"to\": \"Berlin (BER)\",\n        \"duration\": \"11 hours 30 minutes\",\n        \"price\": \"$450\",\n        \"booking_url\": \"https://www.turkishairlines.com/en-int/flights/del-ber\" \n      },\n      \"return\": {\n        \"date\": \"25 July 2024\",\n        \"time\": \"09:00 PM\",\n        \"airline\": \"Turkish Airlines\",\n        \"flight_number\": \"TK 722\",\n        \"from\": \"Berlin (BER)\",\n        \"to\": \"Delhi (DEL)\",\n        \"duration\": \"10 hours 45 minutes\",\n        \"price\": \"$450\",\n        \"booking_url\": \"https://www.turkishairlines.com/en-int/flights/ber-del\"\n      }\n    },\n    \"hotel\": {\n      \"name\": \"The Circus Hotel\",\n      \"address\": \"Skalitzer Straße 110, 10997 Berlin, Germany\",\n      \"price\": \"$60/night\",\n      \"image_url\": \"https://www.thecircusberlin.com/images/hero.jpg\",\n      \"geo_coordinates\": \"52.5000, 13.4050\",\n      \"rating\": 4.5,\n      \"description\": \"A stylish and affordable hotel in a trendy neighborhood.\",\n      \"places_nearby\": [\n        {\n          \"name\": \"East Side Gallery\",\n          \"details\": \"The longest open-air gallery in the world, painted on the remaining section of the Berlin Wall.\",\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/East_Side_Gallery_%28Berlin%29_01.jpg/1280px-East_Side_Gallery_%28Berlin%29_01.jpg\",\n          \"geo_coordinates\": \"52.5046, 13.4431\",\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"15 minutes walk\"\n        },\n        {\n          \"name\": \"Friedrichshain Park\",\n          \"details\": \"A large park with a skate park, playground, and beer gardens.\",\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Friedrichshain_Park.JPG/1280px-Friedrichshain_Park.JPG\",\n          \"geo_coordinates\": \"52.5173, 13.4376\",\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"10 minutes walk\"\n        }\n      ]\n    },\n    \"itinerary\": {\n      \"day1\": {\n        \"title\": \"Exploring the East Side\",\n        \"schedule\": [\n          {\n            \"time\": \"11:00 AM\",\n            \"activity\": \"Arrival at Berlin Brandenburg Airport (BER)\",\n            \"details\": \"Take the S-Bahn train to Friedrichstraße station and walk to the hotel.\",\n            \"location\": \"Berlin Brandenburg Airport (BER)\",\n            \"geo_coordinates\": \"52.3717, 13.4985\"\n          },\n          {\n            \"time\": \"12:00 PM\",\n            \"activity\": \"Check in to the Circus Hotel\",\n            \"details\": \"Leave your luggage and refresh.\",\n            \"location\": \"The Circus Hotel\",\n            \"geo_coordinates\": \"52.5000, 13.4050\"\n          },\n          {\n            \"time\": \"1:00 PM\",\n            \"activity\": \"Lunch at Mustafa's Gemüse Kebap\",\n            \"details\": \"A popular spot for delicious and affordable kebabs.\",\n            \"location\": \"Mustafa's Gemüse Kebap\",\n            \"geo_coordinates\": \"52.5013, 13.4078\"\n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"activity\": \"Visit the East Side Gallery\",\n            \"details\": \"Explore the famous murals on the Berlin Wall.\",\n            \"location\": \"East Side Gallery\",\n            \"geo_coordinates\": \"52.5046, 13.4431\"\n          },\n          {\n            \"time\": \"4:00 PM\",\n            \"activity\": \"Walk along the Spree River\",\n            \"details\": \"Enjoy the views of the city from the riverbanks.\",\n            \"location\": \"Spree River\",\n            \"geo_coordinates\": \"52.5163, 13.4088\"\n          },\n          {\n            \"time\": \"6:00 PM\",\n            \"activity\": \"Dinner at Shiso Burger\",\n            \"details\": \"A trendy spot for delicious burgers with Japanese influences.\",\n            \"location\": \"Shiso Burger\",\n            \"geo_coordinates\": \"52.5034, 13.4069\"\n          },\n          {\n            \"time\": \"8:00 PM\",\n            \"activity\": \"Relax at the hotel\",\n            \"details\": \"Wind down after a day of exploring.\",\n            \"location\": \"The Circus Hotel\",\n            \"geo_coordinates\": \"52.5000, 13.4050\"\n          }\n        ]\n      },\n      \"day2\": {\n        \"title\": \"Exploring the City Center\",\n        \"schedule\": [\n          {\n            \"time\": \"9:00 AM\",\n            \"activity\": \"Breakfast at the hotel\",\n            \"details\": \"Start your day with a hearty breakfast.\",\n            \"location\": \"The Circus Hotel\",\n            \"geo_coordinates\": \"52.5000, 13.4050\"\n          },\n          {\n            \"time\": \"10:00 AM\",\n            \"activity\": \"Visit the Brandenburg Gate\",\n            \"details\": \"An iconic landmark and symbol of German unity.\",\n            \"location\": \"Brandenburg Gate\",\n            \"geo_coordinates\": \"52.5164, 13.3777\"\n          },\n          {\n            \"time\": \"11:00 AM\",\n            \"activity\": \"Explore the Reichstag Building\",\n            \"details\": \"The seat of the German Parliament, offering panoramic city views from the dome.\",\n            \"location\": \"Reichstag Building\",\n            \"geo_coordinates\": \"52.5189, 13.3762\"\n          },\n          {\n            \"time\": \"1:00 PM\",\n            \"activity\": \"Lunch at a traditional German restaurant\",\n            \"details\": \"Savor the flavors of local cuisine.\",\n            \"location\": \"Traditional German Restaurant\",\n            \"geo_coordinates\": \"52.5170, 13.4050\" \n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"activity\": \"Visit the Museum Island\",\n            \"details\": \"Home to five world-renowned museums, including the Pergamon Museum.\",\n            \"location\": \"Museum Island\",\n            \"geo_coordinates\": \"52.5192, 13.4098\"\n          },\n          {\n            \"time\": \"5:00 PM\",\n            \"activity\": \"Enjoy a walk through Tiergarten Park\",\n            \"details\": \"A beautiful green oasis in the heart of the city.\",\n            \"location\": \"Tiergarten Park\",\n            \"geo_coordinates\": \"52.5139, 13.3707\"\n          },\n          {\n            \"time\": \"7:00 PM\",\n            \"activity\": \"Dinner at a rooftop bar\",\n            \"details\": \"Enjoy stunning city views with a drink.\",\n            \"location\": \"Rooftop bar\",\n            \"geo_coordinates\": \"52.5170, 13.4050\" \n          },\n          {\n            \"time\": \"9:00 PM\",\n            \"activity\": \"Return to the hotel\",\n            \"details\": \"Pack your bags for your flight back to Delhi.\",\n            \"location\": \"The Circus Hotel\",\n            \"geo_coordinates\": \"52.5000, 13.4050\"\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\n**Notes:**\n\n* This is a suggested itinerary and can be adjusted based on your interests and time constraints.\n* The flight prices are approximate and can vary depending on the time of booking and availability.\n* The hotel options are just suggestions, and you can find more affordable options online.\n* Public transport is widely available in Berlin, and you can use the S-Bahn, U-Bahn, or buses to get around.\n* Remember to pack appropriate clothing for the weather in Berlin during July, which is usually warm and sunny.\n* Don't forget to try some of the local delicacies like Currywurst and Berliner Weisse.\n* Enjoy your trip to Berlin! \n"},
      ],
    },
  ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
  